{"version":3,"sources":["app.js"],"names":["canvas","document","querySelector","ctx","getContext","width","innerWidth","height","innerHeight","delta","rad","count","lineW","outsideCircle","insideCircle","Line","from","posTo","style","posFrom","updated","update","draw","beginPath","moveTo","x","y","lineTo","strokeStyle","color","lineWidth","stroke","closePath","i","newX","Math","cos","PI","newY","sin","outsideLine","push","insideLine","fillStyle","fillRect","forEach","el","animate","grad","window","requestAnimationFrame","clearRect","fl","targetLines","filter","fi","acos","distance","console","log","mousemoveHandler","e","touches","preventDefault","clientX","clientY","addEventListener","removeEventListener","x1","y1","x2","y2","xDist","yDist","sqrt","pow"],"mappings":"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","file":"app.ba153a86.map","sourceRoot":"..","sourcesContent":["const canvas = document.querySelector('canvas')\nconst ctx = canvas.getContext('2d')\ncanvas.width = innerWidth\ncanvas.height = innerHeight\n\nconst delta = canvas.width / 2 - 100\nconst rad = 250\nconst count = 30\nconst lineW = 40\nconst outsideCircle = []\nconst insideCircle = []\n\nfunction Line (from, posTo, style) {\n  this.posFrom = from\n  this.posTo = posTo\n  this.style = style\n  this.updated = false\n\n  this.update = () => {\n    this.draw()\n  }\n\n  this.draw = () => {\n    ctx.beginPath()\n    ctx.moveTo(this.posFrom.x, this.posFrom.y)\n    ctx.lineTo(this.posTo.x, this.posTo.y)\n    ctx.strokeStyle = this.style.color\n    ctx.lineWidth = this.style.width\n    ctx.stroke()\n    ctx.closePath()\n  }\n}\n\nfor (let i = -3; i <= count + 3; i++) {\n  // draw outside (main) circle\n  let newX = Math.cos(i * Math.PI / count) * rad\n  let newY = Math.sin(i * Math.PI / count) * rad\n  const outsideLine = new Line(\n    {\n      x: newX + delta,\n      y: (newY - delta) * -1\n    },\n    {\n      x: newX - 40 * Math.cos(i * Math.PI / count) + delta,\n      y: (newY - 40 * Math.sin(i * Math.PI / count) - delta) * -1\n    },\n    {\n      color: '#3E2F5B',\n      width: 5\n    }\n  )\n  outsideCircle.push(outsideLine)\n\n  // draw inside circle\n  newX = Math.cos(i * Math.PI / count) * (rad - 70)\n  newY = Math.sin(i * Math.PI / count) * (rad - 70)\n  const insideLine = new Line(\n    {\n      x: newX + delta,\n      y: (newY - delta) * -1\n    },\n    {\n      x: newX - 10 * Math.cos(i * Math.PI / count) + delta,\n      y: (newY - 10 * Math.sin(i * Math.PI / count) - delta) * -1\n    },\n    {\n      color: '#7E8287',\n      width: 5\n    }\n  )\n  insideCircle.push(insideLine)\n}\n\n// initial\nctx.fillStyle = '#261132'\nctx.fillRect(0, 0, canvas.width, canvas.height)\noutsideCircle.forEach(el => {\n  el.update()\n})\ninsideCircle.forEach(el => {\n  el.update()\n})\n\nfunction animate (grad) {\n  window.requestAnimationFrame(function () {})\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n  ctx.fillStyle = '#261132'\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n  let fl = false\n  const targetLines = outsideCircle.filter(el => {\n    el.style = {\n      color: '#3E2F5B',\n      width: 5\n    }\n    let fi = Math.acos(\n      (el.posTo.x - delta) /\n        distance(el.posTo.x, el.posTo.y, delta, delta)\n    )\n    if (el.posTo.x - delta > 0 && el.posTo.y - delta > 0) {\n      fi = -fi\n    } else if (el.posTo.x - delta < 0 && el.posTo.y - delta > 0) {\n      fi = 2 * Math.PI - fi\n    }\n    if (el.updated) {\n      el.updated = false\n      el.posFrom.x -= 20 * Math.cos(fi)\n      el.posFrom.y += 20 * Math.sin(fi)\n    }\n    if (fi > grad) {\n      el.style = {\n        color: '#ccc',\n        width: 5\n      }\n      if (!fl) {\n        fl = true\n        el.style = {\n          color: '#ff5050',\n          width: 5\n        }\n        el.updated = true\n        el.posFrom.x += 20 * Math.cos(fi)\n        el.posFrom.y -= 20 * Math.sin(fi)\n      }\n      el.update()\n      return true\n    } else {\n      el.update()\n      return false\n    }\n  })\n  console.log(outsideCircle)\n  // const indexOfFist = outsideCircle.findIndex((el) => {\n  //   return el == targetLines[0]\n  // })\n\n  // outsideCircle[indexOfFist].style = {\n  //   color: '#ff5050',\n  //   width: 5\n  // }\n  // outsideCircle[indexOfFist].posFrom = {\n  //   x:\n  // }\n  // outsideCircle[indexOfFist].update()\n  // console.log(outsideCircle[indexOfFist])\n  // console.log(targetLines)\n  insideCircle.forEach(el => {\n    el.update()\n  })\n}\n\nfunction mousemoveHandler (e) {\n  if (e.touches) {\n    e.preventDefault()\n    e.x = e.touches[0].clientX\n    e.y = e.touches[0].clientY\n  }\n\n  if (\n    distance(e.x, e.y, delta, delta) < rad + 100 &&\n    distance(e.x, e.y, delta, delta) > rad - lineW - 50\n  ) {\n    let grad = Math.acos((e.x - delta) / distance(e.x, e.y, delta, delta))\n    if (e.x - delta > 0 && e.y - delta > 0) {\n      grad = -grad\n    } else if (e.x - delta < 0 && e.y - delta > 0) {\n      grad = 2 * Math.PI - grad\n    }\n    animate(grad)\n  }\n}\n\ncanvas.addEventListener('touchstart', () => {\n  canvas.addEventListener('touchmove', mousemoveHandler)\n})\n\ncanvas.addEventListener('mousedown', () => {\n  canvas.addEventListener('mousemove', mousemoveHandler)\n})\n\ncanvas.addEventListener('mouseup', () => {\n  canvas.removeEventListener('mousemove', mousemoveHandler)\n})\n\nfunction distance (x1, y1, x2, y2) {\n  const xDist = x2 - x1\n  const yDist = y2 - y1\n\n  return Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2))\n}\n\n// ctx.beginPath()\n//   ctx.strokeStyle = 'white'\n//   ctx.lineWidth = 50\n//   ctx.arc(\n//     delta,\n//     delta,\n//     225,\n//     2 * Math.PI - (count + 3) * Math.PI / count,\n//     3 * Math.PI / count\n//   )\n//   ctx.stroke()\n"]}